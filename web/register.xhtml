<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
	<ui:composition template="includes/layout.xhtml">
		<ui:define name="content">
		<h:form>
		    <h:panelGrid columns="2" cellspacing="20" cellpadding="5">
			<p:outputLabel value="Username:"></p:outputLabel>
			<p:inputText value="#{userControler.username}" required="true"></p:inputText>
			
			<h:outputLabel for="pwd1" value="Password:" />
			<p:password id="pwd1" value="#{userControler.password}" match="pwd2" label="Password 1" required="true" />
			
			<h:outputLabel for="pwd2" value="Password 2:" />
			<p:password id="pwd2" value="#{userControler.password2}" label="Password 2" required="true" />
	
			<h:outputLabel value="First Name:"/>
			<p:inputText value="#{userControler.first}" required="true"/>
			
			<h:outputLabel value="Last Name:"/>
			<p:inputText value="#{userControler.last}" required="true"/>
			
			<h:outputLabel value="Email"/>
			<p:inputText id="email" value="#{userControler.email}" required="true">
			    <f:validator validatorId="emailValidator"/>
			</p:inputText>
			
			<h:outputLabel value="Phone Number:"/>
			<p:inputText value="#{userControler.phoneNumber}" required="true"/>
			
			<p:commandButton ajax="false" value="Register" action="#{userControler.register()}">
			</p:commandButton>
		    </h:panelGrid>
		</h:form>
		<p style="color: red;">#{userControler.poruka}</p>
		<script type="text/javascript">
			PrimeFaces.validator['emailValidator'] = {
 
				pattern: /\S+@\S+/,

				validate: function(element, value) {
				    if(!this.pattern.test(value)) {
					throw {
					    summary: 'Validation Error',
					    detail: value + ' is not a valid email.'
					};
				    }
				}
			    };

		</script>
	    </ui:define>
	</ui:composition>
    </h:body>
</html>

